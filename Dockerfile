FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IHVuaWZpZWRwdXNoLWFwYgpkZXNjcmlwdGlvbjogQWVyb0dlYXIg\
VW5pZmllZFB1c2ggU2VydmVyCmJpbmRhYmxlOiBUcnVlCmFzeW5jOiBvcHRpb25hbAp0YWdzOiAK\
ICAtIG1vYmlsZS1zZXJ2aWNlCiAgLSBtb2JpbGUtY2xpZW50LWVuYWJsZWQKbWV0YWRhdGE6CiAg\
ZGlzcGxheU5hbWU6IFB1c2ggTm90aWZpY2F0aW9ucwogIGxvbmdEZXNjcmlwdGlvbjogIkFuIEFQ\
QiBkZXBsb3lpbmcgdGhlIEFlcm9HZWFyIFVuaWZpZWRQdXNoIFNlcnZlciB3aXRoIHBlcnNpc3Rl\
bnQgc3RvcmFnZSBhbmQgYXV0aGVudGljYXRpb24gdGhyb3VnaCBPcGVuc2hpZnQiCiAgaW1hZ2VV\
cmw6ICJodHRwczovL3Bicy50d2ltZy5jb20vcHJvZmlsZV9pbWFnZXMvMTc5NDQ0MDAwNS9hZXJv\
Z2Vhcl9pY29uLTFfNDAweDQwMC5wbmciCiAgZG9jdW1lbnRhdGlvblVybDogImh0dHBzOi8vZ2l0\
aHViLmNvbS9hZXJvZ2VhcmNhdGFsb2cvdW5pZmllZHB1c2gtYXBiL2Jsb2IvbWFzdGVyL2RvY3Mv\
bW9kdWxlcy91cHNfb3BlbnNoaWZ0L2luZGV4LmFzY2lpZG9jIgogIHByb3ZpZGVyRGlzcGxheU5h\
bWU6ICJSZWQgSGF0LCBJbmMuIgogIGRlcGVuZGVuY2llczoKICAgIC0gImRvY2tlci5pby9hZXJv\
Z2Vhci91bmlmaWVkcHVzaC13aWxkZmx5LXBsYWluOjIuMS4wIgogICAgLSAiZG9ja2VyLmlvL2Nl\
bnRvcy9wb3N0Z3Jlc3FsLTk2LWNlbnRvczc6OS42IgogICAgLSAiZG9ja2VyLmlvL2Flcm9nZWFy\
L3Vwcy1jb25maWctb3BlcmF0b3I6bWFzdGVyIgogICAgLSAiZG9ja2VyLmlvL29wZW5zaGlmdC9v\
YXV0aC1wcm94eTp2MS4xLjAiCiAgc2RrLWRvY3MtYW5kcm9pZDogImh0dHBzOi8vZG9jcy5hZXJv\
Z2Vhci5vcmcvYW5kcm9pZC1zZGsvbGF0ZXN0L2dldHRpbmctc3RhcnRlZC9wdXNoLmh0bWwiCiAg\
c2RrLWRvY3MtY29yZG92YTogImh0dHBzOi8vZ2l0aHViLmNvbS9hZXJvZ2VhcmNhdGFsb2cvdW5p\
ZmllZHB1c2gtYXBiL2Jsb2IvbWFzdGVyL2RvY3MvbW9kdWxlcy9hZXJvZ2Vhci1wdXNoLWNvcmRv\
dmEvdHJvdWJsZXNob290aW5nLmFzY2lpZG9jIgogIHNkay1kb2NzLWlvczogImh0dHBzOi8vZ2l0\
aHViLmNvbS9hZXJvZ2VhcmNhdGFsb2cvdW5pZmllZHB1c2gtYXBiL2Jsb2IvbWFzdGVyL2RvY3Mv\
bW9kdWxlcy9hZXJvZ2Vhci1wdXNoLWlvcy9pbmRleC5tYXJrZG93biIKICBzZGstZG9jcy14YW1h\
cmluOiAiaHR0cHM6Ly9naXRodWIuY29tL2Flcm9nZWFyY2F0YWxvZy91bmlmaWVkcHVzaC1hcGIv\
YmxvYi9tYXN0ZXIvZG9jcy9tb2R1bGVzL2Flcm9nZWFyLXB1c2gtd2luZG93cy9pbmRleC5tYXJr\
ZG93biIKICBzZXJ2aWNlTmFtZTogdXBzCiAgYmluZGluZ3NMaW1pdDogMgpwbGFuczoKICAtIG5h\
bWU6IGRlZmF1bHQKICAgIGRlc2NyaXB0aW9uOiBQZXJzaXN0ZW50IGRlcGxveW1lbnQgb2YgVVBT\
CiAgICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0YToKICAgICAgbW9iaWxlY2xpZW50X2JpbmRfcGFy\
YW1ldGVyc19kYXRhOgogICAgICAgIC0gJ3sibmFtZSI6ICJDTElFTlRfSUQiLCAidmFsdWUiOiAi\
bWV0YWRhdGEubmFtZSIsICJ0eXBlIjogInBhdGgifScKICAgIHBhcmFtZXRlcnM6IFtdCiAgICBi\
aW5kX3BhcmFtZXRlcnM6CiAgICAtIG5hbWU6IENMSUVOVF9JRAogICAgICByZXF1aXJlZDogVHJ1\
ZQogICAgICB0aXRsZTogTW9iaWxlIENsaWVudCBJRAogICAgICB0eXBlOiBzdHJpbmcKICAgIC0g\
bmFtZTogQ0xJRU5UX1RZUEUKICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgdGl0bGU6IE1vYmls\
ZSBDbGllbnQgVHlwZQogICAgICB0eXBlOiBlbnVtCiAgICAgIGRlZmF1bHQ6ICJBbmRyb2lkIgog\
ICAgICBlbnVtOiBbIkFuZHJvaWQiLCAiSU9TIl0KICAgIC0gbmFtZTogZ29vZ2xla2V5CiAgICAg\
IHRpdGxlOiBZb3VyIFNlcnZlciBLZXkgZm9yIEZpcmViYXNlIENsb3VkIE1lc3NhZ2luZwogICAg\
ICB0eXBlOiBzdHJpbmcKICAgICAgZGlzcGxheV9ncm91cDogQW5kcm9pZAogICAgLSBuYW1lOiBw\
cm9qZWN0TnVtYmVyCiAgICAgIHRpdGxlOiBZb3VyIFNlbmRlciBJRCwgbmVlZGVkIHRvIGNvbm5l\
Y3RpbmcgdG8gRkNNCiAgICAgIHR5cGU6IHN0cmluZwogICAgICBkaXNwbGF5X2dyb3VwOiBBbmRy\
b2lkCiAgICAtIG5hbWU6IGNlcnQKICAgICAgdGl0bGU6IGlPUyAucDEyIGZpbGUgKGVuY29kZSBj\
b250ZW50cyBpbiBiYXNlNjQgYmVmb3JlIHBhc3RpbmcpCiAgICAgIHR5cGU6IHN0cmluZwogICAg\
ICBkaXNwbGF5X3R5cGU6IHRleHRhcmVhCiAgICAgIGRpc3BsYXlfZ3JvdXA6IGlPUwogICAgLSBu\
YW1lOiBwYXNzcGhyYXNlCiAgICAgIHRpdGxlOiBUaGUgcGFzc3BocmFzZQogICAgICB0eXBlOiBz\
dHJpbmcKICAgICAgZGlzcGxheV90eXBlOiBwYXNzd29yZAogICAgICBkaXNwbGF5X2dyb3VwOiBp\
T1MKICAgIC0gbmFtZTogaW9zSXNQcm9kdWN0aW9uCiAgICAgIHRpdGxlOiBJcyB0aGlzIGEgcHJv\
ZHVjdGlvbiBjZXJ0aWZpY2F0ZT8KICAgICAgZGVmYXVsdDogZmFsc2UKICAgICAgdHlwZTogYm9v\
bGVhbgogICAgICBkaXNwbGF5X3R5cGU6IGNoZWNrYm94CiAgICAgIGRpc3BsYXlfZ3JvdXA6IGlP\
Uwo="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
COPY vars /opt/ansible/vars
RUN chmod -R g=u /opt/{ansible,apb}
USER apb