FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IHVuaWZpZWRwdXNoLWFwYgpkZXNjcmlwdGlvbjogQWVyb0dlYXIg\
VW5pZmllZFB1c2ggU2VydmVyCmJpbmRhYmxlOiBUcnVlCmFzeW5jOiBvcHRpb25hbAp0YWdzOiAK\
ICAtIG1vYmlsZS1zZXJ2aWNlCiAgLSBtb2JpbGUtY2xpZW50LWVuYWJsZWQKbWV0YWRhdGE6CiAg\
ZGlzcGxheU5hbWU6IFVuaWZpZWQgUHVzaCBTZXJ2ZXIKICBsb25nRGVzY3JpcHRpb246ICJBbiBB\
UEIgZGVwbG95aW5nIHRoZSBBZXJvR2VhciBVbmlmaWVkUHVzaCBTZXJ2ZXIgd2l0aCBwZXJzaXN0\
ZW50IHN0b3JhZ2UgYW5kIGF1dGhlbnRpY2F0aW9uIHRocm91Z2ggT3BlbnNoaWZ0IgogIGltYWdl\
VXJsOiAiaHR0cHM6Ly9wYnMudHdpbWcuY29tL3Byb2ZpbGVfaW1hZ2VzLzE3OTQ0NDAwMDUvYWVy\
b2dlYXJfaWNvbi0xXzQwMHg0MDAucG5nIgogIGRvY3VtZW50YXRpb25Vcmw6ICJodHRwczovL2dp\
dGh1Yi5jb20vYWVyb2dlYXJjYXRhbG9nL3VuaWZpZWRwdXNoLWFwYi9ibG9iL21hc3Rlci9kb2Nz\
L21vZHVsZXMvdXBzX29wZW5zaGlmdC9pbmRleC5hc2NpaWRvYyIKICBwcm92aWRlckRpc3BsYXlO\
YW1lOiAiUmVkIEhhdCwgSW5jLiIKICBkZXBlbmRlbmNpZXM6CiAgICAtICJkb2NrZXIuaW8vYWVy\
b2dlYXIvdW5pZmllZHB1c2gtd2lsZGZseS1wbGFpbjoyLjAuMiIKICAgIC0gImRvY2tlci5pby9j\
ZW50b3MvcG9zdGdyZXNxbC05Ni1jZW50b3M3OjkuNiIKICAgIC0gImRvY2tlci5pby9hZXJvZ2Vh\
ci91cHMtY29uZmlnLW9wZXJhdG9yOm1hc3RlciIKICAgIC0gImRvY2tlci5pby9vcGVuc2hpZnQv\
b2F1dGgtcHJveHk6djEuMS4wIgogIHNlcnZpY2VOYW1lOiB1cHMKcGxhbnM6CiAgLSBuYW1lOiBk\
ZWZhdWx0CiAgICBkZXNjcmlwdGlvbjogUGVyc2lzdGVudCBkZXBsb3ltZW50IG9mIFVQUwogICAg\
ZnJlZTogVHJ1ZQogICAgbWV0YWRhdGE6IHt9CiAgICBwYXJhbWV0ZXJzOiBbXQogICAgYmluZF9w\
YXJhbWV0ZXJzOgogICAgLSBuYW1lOiBDTElFTlRfSUQKICAgICAgcmVxdWlyZWQ6IFRydWUKICAg\
ICAgdGl0bGU6IFRoZSBJRCBvZiB0aGUgbW9iaWxlIGNsaWVudCB0byBiaW5kIHRoaXMgdmFyaWFu\
dCB0bwogICAgICB0eXBlOiBzdHJpbmcKICAgIC0gbmFtZTogdHlwZQogICAgICByZXF1aXJlZDog\
VHJ1ZQogICAgICB0aXRsZTogQXBwIHRhcmdldAogICAgICB0eXBlOiBlbnVtCiAgICAgIGRlZmF1\
bHQ6ICJBbmRyb2lkIgogICAgICBlbnVtOiBbIkFuZHJvaWQiLCAiSU9TIl0KICAgIC0gbmFtZTog\
Z29vZ2xla2V5CiAgICAgIHRpdGxlOiBZb3VyIEdvb2dsZSBLZXkgZm9yIEZpcmViYXNlIENsb3Vk\
IE1lc3NhZ2luZwogICAgICB0eXBlOiBzdHJpbmcKICAgICAgZGlzcGxheV9ncm91cDogQW5kcm9p\
ZAogICAgLSBuYW1lOiBwcm9qZWN0TnVtYmVyCiAgICAgIHRpdGxlOiBZb3VyIEZDTSBQcm9qZWN0\
IE51bWJlciwgbmVlZGVkIG9uIHRoZSBtb2JpbGUgY2xpZW50IGZvciBjb25uZWN0aW5nIHdpdGgg\
RkNNCiAgICAgIHR5cGU6IHN0cmluZwogICAgICBkaXNwbGF5X2dyb3VwOiBBbmRyb2lkCiAgICAt\
IG5hbWU6IGNlcnQKICAgICAgdGl0bGU6IGlPUyAucDEyIGZpbGUgKGVuY29kZSBjb250ZW50cyBp\
biBiYXNlNjQgYmVmb3JlIHBhc3RpbmcpCiAgICAgIHR5cGU6IHN0cmluZwogICAgICBkaXNwbGF5\
X3R5cGU6IHRleHRhcmVhCiAgICAgIGRpc3BsYXlfZ3JvdXA6IGlPUwogICAgLSBuYW1lOiBwYXNz\
cGhyYXNlCiAgICAgIHRpdGxlOiBUaGUgcGFzc3BocmFzZQogICAgICB0eXBlOiBzdHJpbmcKICAg\
ICAgZGlzcGxheV90eXBlOiBwYXNzd29yZAogICAgICBkaXNwbGF5X2dyb3VwOiBpT1MKICAgIC0g\
bmFtZTogaW9zSXNQcm9kdWN0aW9uCiAgICAgIHRpdGxlOiBJcyB0aGlzIGEgcHJvZHVjdGlvbiBj\
ZXJ0aWZpY2F0ZT8KICAgICAgdHlwZTogYm9vbGVhbgogICAgICBkaXNwbGF5X3R5cGU6IGNoZWNr\
Ym94CiAgICAgIGRpc3BsYXlfZ3JvdXA6IGlPUwo="



COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
COPY vars /opt/ansible/vars
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
